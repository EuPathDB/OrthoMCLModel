<?xml version="1.0" encoding="UTF-8"?>
<wdkModel>
    <recordClassSet name="GroupRecordClasses">
    
        <recordClass name="GroupRecordClass"
                     urlName="group"
               displayName="Ortholog Group">
            
            <testParamValues>
               <paramValue name="group_name">9644248</paramValue>
            </testParamValues>
        
      <!-- =============================================================== -->
      <!-- Reporters -->  
      <!-- =============================================================== -->
 
      <reporter name="attributesTabular" displayName="%%attributesReporterDisplayName%%" scopes="results"
                implementation="org.gusdb.wdk.model.report.reporter.AttributesTabularReporter">
        <property name="page_size">500</property>
      </reporter>

      <reporter name="tableTabular" displayName="%%tableReporterDisplayName%%" scopes="results"
                implementation="org.gusdb.wdk.model.report.reporter.TableTabularReporter">
      </reporter>


<!-- copied from apicommonshared  genomicRecord.xml -->
<!--  
     <reporter name="tabular" displayName="Tab/Excel: summary" scopes="results,record" 
                      implementation="org.gusdb.wdk.model.report.reporter.AttributesTabularReporter">
     </reporter>
-->
  
     <reporter name="fullRecord" displayName="%%fullReporterDisplayName%%" excludeProjects="EuPathDB"  scopes="record"
                implementation="org.gusdb.wdk.model.report.reporter.FullRecordReporter" />

      <reporter name="xml" displayName="XML: choose from columns and/or tables" excludeProjects="EuPathDB"  scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.XMLReporter" />

      <reporter name="json" displayName="json: choose from columns and/or tables" excludeProjects="EuPathDB"  scopes=""
                    implementation="org.gusdb.wdk.model.report.reporter.JSONReporter" />



      <!-- =============================================================== -->
      <!-- Views -->
      <!-- =============================================================== -->

<!--
            <summaryView name="phyletic" display="Phyletic pattern"/>
            <recordView name="_default" display="Sequences &amp; Statistics"/>
            <recordView name="pfam-domain-graph" display="PFam domains (graphic)"/>
            <recordView name="pfam-domain-list" display="PFam domains (details)"/>
            <recordView name="msa" display="MSA"/>
            <recordView name="layout" display="Cluster graph"/>

-->

      <!-- =============================================================== -->
      <!--  Default summary attributes and sorting attributes -->  
      <!-- =============================================================== -->

         <attributesList
           summary="number_of_members,keywords,descriptions,ec_numbers,archaea,bacteria,alveolata,amoeba,euglenozoa,fungi,metazoa,viridiplantae,other_eukaryotes"
           sorting="number_of_members DESC"/>

      <!-- =============================================================== -->
      <!-- Attributes -->  
      <!-- =============================================================== -->

<!--
            <favorite noteField="group_name" />
-->
             
            <primaryKey aliasPluginClassName="org.gusdb.wdk.model.record.GenericRecordPrimaryKeyAliasPlugin">
                <columnRef>group_name</columnRef>
            </primaryKey>


            <idAttribute name="primary_key" displayName="Ortholog Group">
                <text>
                    <![CDATA[
                    $$group_name$$
                    ]]>
                </text>
            </idAttribute>



            <attributeQueryRef ref="GroupAttributes.GroupAttrs">  

                <columnAttribute name="number_of_members" internal="false" displayName="Total Number Proteins">
                  <reporter name="histogram" displayName="Histogram" scopes=""
                            implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
                    <description>Display the histogram of the values of this attribute</description>
                  </reporter>
                </columnAttribute>

                <columnAttribute name="avg_connectivity" displayName="Average % Homology" help="The average percent homology for all proteins in the group. Each protein's percent homology is the number of its Ortholog, CoOrtholog or Inparalog pairs assigned by the OrthoMCL algorithm divided by the total number of possible pairs for that protein. See the Methods Section for details.">
                  <reporter name="histogram" displayName="Histogram" scopes=""
                            implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
                    <description>Display the histogram of the values of this attribute</description>
                  </reporter>
                </columnAttribute>

                <columnAttribute name="percent_match_pairs" displayName="% Protein Pairs With Similarity" help="The percent of sequence pairs in a group that have an above-threshold similarity  See the Methods Section for details.">
                  <reporter name="histogram" displayName="Histogram" scopes=""
                            implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
                    <description>Display the histogram of the values of this attribute</description>
                  </reporter>
                </columnAttribute>

               <columnAttribute name="avg_percent_identity" displayName="Average % Identity" help="The average percent identity between two sequences in the group that have an above-threshold similarity. See the Methods Section for details.">
                  <reporter name="histogram" displayName="Histogram" scopes=""
                            implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
                    <description>Display the histogram of the values of this attribute</description>
                  </reporter>
                </columnAttribute>

                <columnAttribute name="avg_percent_match" displayName="Avg % Match Length" help="The average of the percent match length of all pairs of sequences in a group that have an above-threshold similarity. See the Methods Section for details.">
                  <reporter name="histogram" displayName="Histogram" scopes=""
                            implementation="org.gusdb.wdk.model.report.reporter.HistogramAttributeReporter">
                    <description>Display the histogram of the values of this attribute</description>
                  </reporter>
                </columnAttribute>

                <columnAttribute name="evalue_display" displayName="Average BLAST E-value" />

                <columnAttribute name="evalue" displayName="Average BLAST E-value Actual" internal="true" />


            </attributeQueryRef>

<!--
            <attributeQueryRef ref="GroupAttributes.MSA">
                <columnAttribute name="msa" displayName="Multiple Sequence Alignment" internal="true" inReportMaker="false" />
            </attributeQueryRef>

            <attributeQueryRef ref="GroupAttributes.MaxSequenceLength">
                <columnAttribute name="max_length" displayName="Longest Sequence" internal="true" inReportMaker="false" />
            </attributeQueryRef>

-->

            <attributeQueryRef ref="GroupAttributes.PhyleticPattern">
	      <columnAttribute name="alveolata_actual" internal="true" />
	      <columnAttribute name="alveolata_total" internal="true" />
	      <columnAttribute name="alveolata_percent" internal="true" />
	      <columnAttribute name="archaea_actual" internal="true" />
	      <columnAttribute name="archaea_total" internal="true" />
	      <columnAttribute name="archaea_percent" internal="true" />
	      <columnAttribute name="amoeba_actual" internal="true" />
	      <columnAttribute name="amoeba_total" internal="true" />
	      <columnAttribute name="amoeba_percent" internal="true" />
	      <columnAttribute name="bacteria_actual" internal="true" />
	      <columnAttribute name="bacteria_total" internal="true" />
	      <columnAttribute name="bacteria_percent" internal="true" />
	      <columnAttribute name="fungi_actual" internal="true" />
	      <columnAttribute name="fungi_total" internal="true" />
	      <columnAttribute name="fungi_percent" internal="true" />
	      <columnAttribute name="euglenozoa_actual" internal="true" />
	      <columnAttribute name="euglenozoa_total" internal="true" />
	      <columnAttribute name="euglenozoa_percent" internal="true" />
	      <columnAttribute name="metazoa_actual" internal="true" />
	      <columnAttribute name="metazoa_total" internal="true" />
	      <columnAttribute name="metazoa_percent" internal="true" />
	      <columnAttribute name="viridiplantae_actual" internal="true" />
	      <columnAttribute name="viridiplantae_total" internal="true" />
	      <columnAttribute name="viridiplantae_percent" internal="true" />
	      <columnAttribute name="other_eukaryotes_actual" internal="true" />
	      <columnAttribute name="other_eukaryotes_total" internal="true" />
	      <columnAttribute name="other_eukaryotes_percent" internal="true" />
            </attributeQueryRef>

            <textAttribute name="alveolata" displayName="Alveolata" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$alveolata_percent$$%; height: 100%; background-color: #CC3399;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$alveolata_actual$$ / $$alveolata_total$$ ($$alveolata_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$alveolata_percent$$
		  ]]>
              </text>
            </textAttribute>

            <textAttribute name="archaea" displayName="Archaea" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$archaea_percent$$%; height: 100%; background-color: #77CCDD;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$archaea_actual$$ / $$archaea_total$$ ($$archaea_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$archaea_percent$$
		  ]]>
              </text>
            </textAttribute>

            <textAttribute name="amoeba" displayName="Amoeba" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$amoeba_percent$$%; height: 100%; background-color: #3399CC;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$amoeba_actual$$ / $$amoeba_total$$ ($$amoeba_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$amoeba_percent$$
		  ]]>
              </text>
            </textAttribute>

            <textAttribute name="bacteria" displayName="Bacteria" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$bacteria_percent$$%; height: 100%; background-color: #9999CC;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$bacteria_actual$$ / $$bacteria_total$$ ($$bacteria_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$bacteria_percent$$
		  ]]>
              </text>
            </textAttribute>

            <textAttribute name="fungi" displayName="Fungi" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$fungi_percent$$%; height: 100%; background-color: #AA44DD;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$fungi_actual$$ / $$fungi_total$$ ($$fungi_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$fungi_percent$$
		  ]]>
              </text>
            </textAttribute>

            <textAttribute name="euglenozoa" displayName="Euglenozoa" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$euglenozoa_percent$$%; height: 100%; background-color: #CCCC66;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$euglenozoa_actual$$ / $$euglenozoa_total$$ ($$euglenozoa_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$euglenozoa_percent$$
		  ]]>
              </text>
            </textAttribute>

            <textAttribute name="metazoa" displayName="Metazoa" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$metazoa_percent$$%; height: 100%; background-color: #CC6666;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$metazoa_actual$$ / $$metazoa_total$$ ($$metazoa_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$metazoa_percent$$
		  ]]>
              </text>
            </textAttribute>

            <textAttribute name="viridiplantae" displayName="Viridiplantae" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$viridiplantae_percent$$%; height: 100%; background-color: #CC9933;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$viridiplantae_actual$$ / $$viridiplantae_total$$ ($$viridiplantae_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$viridiplantae_percent$$
		  ]]>
              </text>
            </textAttribute>

            <textAttribute name="other_eukaryotes" displayName="Other_Eukaryotes" truncateTo="100000" >
	      <display>
                  <![CDATA[
		      <div style="display: flex; width: 8em; align-items: flex-end; padding: 0.5em;">
			  <div style="width: 100%; height: 1em; background-color: white; border: 1px solid gray;">
			      <div style="width: $$other_eukaryotes_percent$$%; height: 100%; background-color: #CC9999;">
			      </div>
			  </div>
		      </div>
		      <div style="padding: 0.5em 0.25em;"; align-items: center>
			   $$other_eukaryotes_actual$$ / $$other_eukaryotes_total$$ ($$other_eukaryotes_percent$$%)
		      </div>
		  ]]>
	      </display>
              <text>
                  <![CDATA[
			   $$other_eukaryotes_percent$$
		  ]]>
              </text>
            </textAttribute>


            <attributeQueryRef ref="GroupAttributes.Layout">
                <columnAttribute name="layout" displayName="Layout" internal="true" inReportMaker="false" />
            </attributeQueryRef>

            <attributeQueryRef ref="GroupAttributes.EcNumbers">
                <columnAttribute name="ec_numbers" displayName="EC Numbers" />
            </attributeQueryRef>

            <attributeQueryRef ref="GroupAttributes.Keywords">
                <columnAttribute name="keywords" displayName="Keywords" />
            </attributeQueryRef>

            <attributeQueryRef ref="GroupAttributes.Domains">
                <columnAttribute name="descriptions" displayName="PFam Domains" />
            </attributeQueryRef>

            <textAttribute name="cluster_page" displayName="Cluster graph of all proteins" align="center" help="Open a new tab with cluster layout of this ortholog group" >
              <text>
                  <![CDATA[
                           <a href="/a/app/cluster-graph/$$group_name$$" target="_blank">Click to open the Cluster graph in a new tab</a>
			   <br><br>
                           <a href="/a/app/cluster-graph/$$group_name$$" target="_blank"><img src="/a/images/cluster_layout_thumbnail2.png" width="150" /></a> 
		  ]]>
              </text>
            </textAttribute>


            <textAttribute name="record_overview" displayName="Record Overview HTML">
              <text>
                  <![CDATA[
			   <div class="eupathdb-RecordOverview">
			      <div class="eupathdb-RecordOverviewTitle">
			      </div>

			      <div class="eupathdb-RecordOverviewPanels">
			          <div class="eupathdb-RecordOverviewLeft">
				      <div class="eupathdb-RecordOverviewItem" data-label="Total Number of Proteins">$$number_of_members$$</div>
				      <div class="eupathdb-RecordOverviewItem" data-label="Keywords">$$keywords$$</div>
				      <div class="eupathdb-RecordOverviewItem" data-label="EC Numbers">$$ec_numbers$$</div>
				      <div class="eupathdb-RecordOverviewItem" data-label="PFam Domains">$$descriptions$$</div>
			          </div>
			      </div>
			  </div>
		  ]]>
              </text>
            </textAttribute>


      <!-- =============================================================== -->
      <!-- Tables -->
      <!-- =============================================================== -->

            <table name="TaxonCounts" inReportMaker="false"
                   displayName="Phlyetic Distribution of Proteins"
                   queryRef="GroupTables.TaxonCounts">
                <columnAttribute name="taxon_id" displayName="Taxon ID" />
                <columnAttribute name="abbrev" displayName="Taxon Abbreviation" />
                <columnAttribute name="count" displayName="Count" />
            </table>

            <table name="Statistics" inReportMaker="false"
                   displayName="Group Statistics"
                   queryRef="GroupTables.Statistics">
                <columnAttribute name="group_type" displayName="Protein types" />
                <columnAttribute name="number_of_members" displayName="# Proteins" />
                <columnAttribute name="avg_percent_match" displayName="Avg % Match" />
                <columnAttribute name="avg_percent_identity" displayName="Avg % Identity" help="The average of the percent identity of all pairs of sequences in a group that have an above-threshold similarity.  See the Methods Section for details." />
                <columnAttribute name="number_of_match_pairs" displayName="Num Pairs With Similarity"/>
                <columnAttribute name="max_match_pairs" displayName="Max Possible Pairs"/>
                <columnAttribute name="percent_match_pairs" displayName="% Protein Pairs With Similarity"/>
                <columnAttribute name="avg_connectivity" displayName="Avg % Homology"/>
                <columnAttribute name="evalue_display" displayName="Average BLAST E-value" />
                <columnAttribute name="evalue" displayName="Average BLAST E-value Actual" internal="true" />
            </table>


            <table name="Sequences"
                   displayName="List of All Proteins"
                   queryRef="GroupTables.Proteins">
                 <description><![CDATA[To align sequences or display sequences in FASTA format, select genes from the table below. Then choose the 'Output format' and click the 'Run Clustal Omega for selected genes' button.]]>
		 </description>


		 <textAttribute name="clustalInput" displayName="Clustal Omega" inReportMaker="false" help="Select proteins to submit to clustal Omega at bottom of this table">
		   <text>
                     <![CDATA[
			      <input type="checkbox" name="msa_full_ids" value="$$full_id$$">
		     ]]>
                   </text>
		 </textAttribute>


		 <linkAttribute displayName="Accession" name="sequence_link" inReportMaker="false" internal="false" help="Taxon-abbreviation|Protein-Id. Click to visit this protein's page at OrthoMCL.">
		   <displayText>
		     <![CDATA[ $$full_id$$  ]]>
		   </displayText>
		   <url>
		     <![CDATA[
			      @LEGACY_WEBAPP_BASE_URL@/app/record/sequence/$$full_id$$
		     ]]>
		   </url>
		 </linkAttribute>

	      <columnAttribute name="description" displayName="Description" />
	      <columnAttribute name="taxon_name" displayName="Taxon" />
	      <columnAttribute name="core_peripheral" displayName="Core/Peripheral" />
	      <columnAttribute name="length" displayName="Length (aa)" />
	      <columnAttribute name="ec_numbers" displayName="EC Numbers" />
	      <columnAttribute name="previous_groups" displayName="Previous Groups" />
	      <columnAttribute name="full_id" internal="true" />
	      <columnAttribute name="taxon_abbrev" displayName="Taxon Abbreviation" internal="true" inReportMaker="false" />
            </table>
            
            <table name="PFams"
                   displayName="PFam Legend"
                   queryRef="GroupTables.PFams">
                <columnAttribute name="accession" displayName="Accession Number" />
                <columnAttribute name="symbol" displayName="Symbol" />
                <columnAttribute name="description" displayName="Description" />
                <columnAttribute name="occurrences" displayName="Count" />
                <columnAttribute name="domain_index" internal="true" />
                <columnAttribute name="max_index" internal="true" />
            </table>

            <table name="ProteinPFams"
                   displayName="PFam Architecture of Each Protein"
                   queryRef="GroupTables.ProteinPFams">
                <columnAttribute name="accession" displayName="Accession Number" />
                <columnAttribute name="symbol" displayName="Symbol" />
                <columnAttribute name="full_id" displayName="Source Id" />
                <columnAttribute name="core_peripheral" displayName="Core/Peripheral" />
                <columnAttribute name="protein_length" displayName="Protein Length" />
                <columnAttribute name="start_min" displayName="End" />
                <columnAttribute name="end_max" displayName="Start" />
                <columnAttribute name="domain_index" internal="true" />
            </table>

            <table name="EcNumber"
                   displayName="Summary of EC Numbers"
                   queryRef="GroupTables.EcNumber">
              <columnAttribute name="ec_number" internal="true" inReportMaker="true"/>
              <linkAttribute name="ec_number_link" inReportMaker="false"
                             displayName="EC Number">
                   <displayText>
                      <![CDATA[
                      $$ec_number$$
                      ]]>
                   </displayText>
                   <url>
                      <![CDATA[http://enzyme.expasy.org/EC/$$ec_number$$]]>
                   </url>
              </linkAttribute>
              <columnAttribute displayName="EC Description"
                               name="description"/>
              <columnAttribute name="sequence_count" displayName="# Proteins in Group"/>
            </table>

            <table name="GroupName"
                   queryRef="GroupTables.GroupName">
              <columnAttribute name="name_string" internal="true" inReportMaker="true"/>
            </table>


            <table name="KeywordFrequency" internal="true"
                   queryRef="GroupTables.KeywordFrequency">
              <columnAttribute name="keyword"/>
              <columnAttribute name="frequency"/>
            </table>


            <table name="DomainFrequency" internal="true"
                   queryRef="GroupTables.DomainFrequency">
              <columnAttribute name="keyword"/>
              <columnAttribute name="frequency"/>
            </table>

        </recordClass>

    </recordClassSet>

</wdkModel>
